USE Ciudadano
GO
--Alterar la Base de Datos para Agregar un Grupo de Archivos Optimizado para Memoria
ALTER DATABASE CIUDADANO
ADD FILEGROUP CIUDADANOINMEMORY_MOD
CONTAINS MEMORY_OPTIMIZED_DATA
GO
--Agregar un Archivo al Grupo de Archivos Optimizado para Memoria
ALTER DATABASE CIUDADANO
ADD FILE (NAME='CIUDADANOINMEMORY', FILENAME='C:\DATA\CIUDADANOINMEMORY')
TO FILEGROUP CIUDADANOINMEMORY_MOD
GO
-- Obtener los Primeros 100 Registros de la Tabla CIUDADANO
SELECT TOP 100 * FROM CIUDADANO
-- Contar el Número Total de Registros en la Tabla CIUDADANO
SELECT COUNT (*) FROM CIUDADANO
--Crear Tabla Basada en disco
CREATE TABLE [DiskBasedCiudadanoTable]
(
[CODIGO] INT IDENTITY(1,1) NOT NULL PRIMARY KEY,
NOM1 NCHAR (150) NULL,
NOM2 NCHAR (150) NULL,
APE1 NCHAR (200) NULL,
APE2 NCHAR (200) NULL
)
--Tabla basada en memoria
CREATE TABLE [MemoryOptimizedCiudadanoTable]
(
[CODIGO] INT IDENTITY(1,1) NOT NULL PRIMARY KEY NONCLUSTERED HASH WITH (BUCKET_COUNT=50000),
NOM1 NCHAR ( 150) NULL,
NOM2 NCHAR (150) NULL,
APE1 NCHAR ( 200) NULL,
APE2 NCHAR ( 200) NULL
) WITH (MEMORY_OPTIMIZED=ON, DURABILITY = SCHEMA_AND_DATA)
GO
--Inserción de Datos en Tabla Basada en Disco
INSERT INTO DiskBasedCiudadanoTable (NOM1, NOM2, APE1, APE2)
SELECT TOP 1000000 NOM1, NOM2, APE1, APE2 FROM CIUDADANO
GO
--Inserción de Datos en Tabla Optimizada para Memoria
INSERT INTO MemoryOptimizedCiudadanoTable(NOM1, NOM2, APE1, APE2)
SELECT TOP 1000000 NOM1, NOM2, APE1, APE2 FROM CIUDADANO
GO
--Consulta por Código en Tabla Optimizada para Memoria
SELECT NOM1, NOM2, APE1, APE2 FROM MemoryOptimizedCiudadanoTable
WHERE CODIGO=998999
--Consulta por Nombre en Tabla Optimizada para Memoria
SELECT NOM1, NOM2, APE1, APE2 FROM MemoryOptimizedCiudadanoTable
WHERE NOM1='VICTOR'
